:root{
  --bg:#171a21;
  --panel:#1b2838;
  --panel-light:#2a475e;
  --muted:#8f98a0;
  --accent:#66c0f4;
  --accent-2:#1999ff;
  --card:#16202d;
  --positive:#beee11;
  --gold:#ffb700;
  --border:#3d4450;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  width:420px;
  margin:0;
  font-family: 'Motiva Sans', 'Segoe UI', Roboto, Arial, sans-serif;
  background:var(--bg);
  color:#c7d5e0;
  font-size:14px;
}

.popup{display:flex;flex-direction:column;height:580px}

.header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 16px;
  background:var(--panel);
  border-bottom:1px solid var(--border);
}
.logo{display:flex;align-items:center;gap:10px}
.logo img{height:24px;opacity:0.9}
.logo h1{font-size:16px;margin:0;color:var(--accent);font-weight:600;letter-spacing:0.5px}

.header-actions{display:flex;gap:8px}
.icon-btn{
  background:transparent;
  border:none;
  color:var(--muted);
  cursor:pointer;
  font-size:18px;
  padding:4px 8px;
  border-radius:4px;
  transition:all 0.2s;
}
.icon-btn:hover{color:var(--accent-2);background:rgba(102,192,244,0.1)}

.main{padding:12px 16px;flex:1;overflow:hidden;display:flex;flex-direction:column}
.controls{display:flex;gap:10px;align-items:center;margin-bottom:12px}
#search{
  flex:1;
  padding:10px 12px;
  border-radius:4px;
  border:1px solid var(--border);
  background:var(--card);
  color:#c7d5e0;
  font-size:13px;
  transition:border-color 0.2s;
}
#search:focus{outline:none;border-color:var(--accent)}
#search::placeholder{color:var(--muted)}

.last-updated{font-size:11px;color:var(--muted);white-space:nowrap}

.status-badge{
  font-size:10px;
  color:var(--positive);
  animation:pulse 2s infinite;
  cursor:help;
}
.status-badge.cached{color:var(--gold)}
.status-badge.sample{color:var(--muted)}

@keyframes pulse{
  0%,100%{opacity:1}
  50%{opacity:0.5}
}

.next-sale{
  background:linear-gradient(90deg, #1b2838 0%, #2a3f5f 100%);
  padding:10px 12px;
  border-radius:6px;
  margin-bottom:12px;
  color:var(--accent);
  font-size:13px;
  border:1px solid var(--border);
  text-align:center;
  font-weight:500;
}

.deal-list{
  flex:1;
  overflow-y:auto;
  overflow-x:hidden;
  padding-right:6px;
}

.deal-card{
  display:flex;
  gap:12px;
  background:var(--panel-light);
  padding:10px;
  margin-bottom:10px;
  border-radius:6px;
  align-items:flex-start;
  cursor:pointer;
  transition:all 0.2s ease;
  border:1px solid transparent;
}
.deal-card:hover{
  transform:translateY(-2px);
  box-shadow:0 4px 12px rgba(0,0,0,0.6);
  border-color:var(--accent);
  background:var(--panel);
}
.deal-card img{
  width:92px;
  height:43px;
  object-fit:cover;
  border-radius:4px;
  flex-shrink:0;
  background:var(--card);
}
.deal-info{
  display:flex;
  flex-direction:column;
  gap:6px;
  flex:1;
  min-width:0;
}
.deal-info strong{
  font-size:14px;
  color:#ffffff;
  font-weight:600;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.meta{
  display:flex;
  gap:10px;
  align-items:center;
  font-size:12px;
  flex-wrap:wrap;
}
.discount{
  background:var(--positive);
  color:#1b2838;
  font-weight:700;
  padding:2px 8px;
  border-radius:3px;
  font-size:13px;
}
.free-badge{
  background:linear-gradient(90deg, #4CAF50 0%, #45a049 100%);
  color:#ffffff;
  font-weight:700;
  padding:2px 8px;
  border-radius:3px;
  font-size:13px;
}
.price{
  color:var(--accent);
  font-weight:600;
  font-size:14px;
}
.lowest{
  color:var(--gold);
  font-size:11px;
}

.loading, .no-deals{
  text-align:center;
  padding:40px 20px;
  color:var(--muted);
  font-size:14px;
}

/* modal */
.modal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,0.85);
  backdrop-filter:blur(4px);
  z-index:1000;
}
.modal[aria-hidden="false"]{display:flex}
.modal-content{
  background:var(--panel);
  padding:20px;
  border-radius:8px;
  width:360px;
  color:#c7d5e0;
  border:1px solid var(--border);
  box-shadow:0 8px 24px rgba(0,0,0,0.8);
}
.modal-content h3{
  margin:0 0 16px 0;
  color:var(--accent);
  font-size:18px;
  font-weight:600;
}
.checkbox-label{
  display:flex;
  align-items:center;
  gap:10px;
  margin:12px 0;
  font-size:14px;
  cursor:pointer;
}
.checkbox-label input[type=checkbox]{
  width:18px;
  height:18px;
  cursor:pointer;
}
.checkbox-label span{
  flex:1;
}
.hint{
  font-size:12px;
  color:var(--muted);
  margin:12px 0;
  line-height:1.5;
  padding:8px;
  background:var(--card);
  border-radius:4px;
  border-left:3px solid var(--accent);
}
.modal-actions{
  display:flex;
  justify-content:flex-end;
  gap:10px;
  margin-top:16px;
}
.modal-actions button{
  padding:8px 16px;
  border-radius:4px;
  border:none;
  cursor:pointer;
  font-size:13px;
  font-weight:600;
  transition:all 0.2s;
}
.btn-primary{
  background:linear-gradient(90deg, #06bfff 0%, #2671dc 100%);
  color:#ffffff;
}
.btn-primary:hover{
  background:linear-gradient(90deg, #00a2e8 0%, #1e5bb8 100%);
  box-shadow:0 2px 8px rgba(6,191,255,0.4);
}
.btn-secondary{
  background:var(--panel-light);
  color:#c7d5e0;
}
.btn-secondary:hover{
  background:#3d5a6f;
}

/* scrollbar */
.deal-list::-webkit-scrollbar{width:10px}
.deal-list::-webkit-scrollbar-track{background:var(--card);border-radius:10px}
.deal-list::-webkit-scrollbar-thumb{
  background:var(--panel-light);
  border-radius:10px;
  border:2px solid var(--card);
}
.deal-list::-webkit-scrollbar-thumb:hover{background:var(--border)}